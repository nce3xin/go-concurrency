# 线程安全的map

golang内置的map类型不是线程安全的。

如果要线程安全，有2种方法：
- 加读写锁
- 分片加锁（优化），减少锁的粒度。减少锁的粒度最常用的办法就是分片（shard）。将一把锁分成几把锁，每个锁控制一个分片。

golang自带的sync.Map不常用。